(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5062],{2148:(e,t,r)=>{"use strict";r.d(t,{h:()=>s});var l=r(2549);let s=e=>{let t=null==e?void 0:e.data,r=(null==t?void 0:t.message)||(null==e?void 0:e.message)||"Something went wrong. Please try again later.",s=null==t?void 0:t.errors;(null==e?void 0:e.status)==="FETCH_ERROR"&&(r="Something went wrong. Please try again later."),Array.isArray(s)&&s.length>0?s.forEach(e=>(0,l.A)(e)):(0,l.A)(r)}},2549:(e,t,r)=>{"use strict";r.d(t,{A:()=>a,Z:()=>s});var l=r(13568);let s=e=>{l.Ay.success(e)},a=e=>{l.Ay.error(e)}},9903:(e,t,r)=>{Promise.resolve().then(r.bind(r,66277))},18682:(e,t,r)=>{"use strict";r.d(t,{F:()=>a});var l=r(29944),s=r(12115);let a=()=>{let[e,t]=(0,s.useState)(null);return(0,s.useEffect)(()=>{{let e=localStorage.getItem(l.rS.USER_DATA);e&&t(JSON.parse(e))}},[]),{localUser:e,updateLocalUser:e=>{localStorage.setItem(l.rS.USER_DATA,JSON.stringify(e)),t(e)},clearUserData:()=>{localStorage.removeItem(l.rS.USER_DATA),localStorage.removeItem(l.rS.ACCESS_TOKEN),t(null)}}}},66277:(e,t,r)=>{"use strict";r.d(t,{default:()=>m});var l=r(95155),s=r(12115),a=r(35695),n=r(29944),o=r(2549),i=r(94791),u=r(23638),c=r(2148),d=r(67316),f=r(34540);function x(){let{user:e}=(0,f.d4)(e=>e.user);(0,s.useEffect)(()=>{if(!localStorage.getItem(n.rS.CHANGE_PASSWORD_TOKEN))return void t.push("/profile/change-password")},[]),(0,d.A)();let t=(0,a.useRouter)(),[r]=(0,u.Dy)(),[x]=(0,u.Sf)(),[m,p]=(0,s.useState)(!1),[g,S]=(0,s.useState)(Array(6).fill("")),h=async()=>{let e=localStorage.getItem(n.rS.CHANGE_PASSWORD_TOKEN);try{p(!0);let r=g.join("");if(6!==r.length)return void(0,o.A)("Please enter all 6 digits.");if(!e){(0,o.A)("Invalid or expired token. Please try again."),t.push("/registration");return}await x({otp:r,token:localStorage.getItem(n.rS.CHANGE_PASSWORD_TOKEN)||""}).unwrap(),localStorage.removeItem(n.rS.RESET_PASSWORD_TOKEN),(0,o.Z)("OTP verified successfully"),t.push("/profile")}catch(e){(0,c.h)(e)}finally{p(!1)}},v=async()=>{try{p(!0);let t=localStorage.getItem(n.rS.CHANGE_PASSWORD_TOKEN);if(t&&e){let l={token:t,email:e.email},s=await r(l).unwrap();localStorage.setItem(n.rS.CHANGE_PASSWORD_TOKEN,s.token),(0,o.Z)("OTP sent successfully")}}catch(e){(0,c.h)(e)}finally{p(!1)}};return(0,l.jsx)(i.A,{handleResentOTP:v,email:(null==e?void 0:e.email)||"",handleSubmit:h,loading:m,onChange:e=>{S(e)}})}function m(){return(0,l.jsx)(s.Suspense,{fallback:(0,l.jsx)("div",{children:"Loading..."}),children:(0,l.jsx)(x,{})})}},67316:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var l=r(12115),s=r(34540),a=r(18682),n=r(35695);let o=()=>{let e=(0,n.useRouter)(),{isAuthentication:t}=(0,s.d4)(e=>e.user),{localUser:r}=(0,a.F)();(0,l.useEffect)(()=>{t||r||e.push("/login")},[t,r,e])}},94791:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var l=r(95155),s=r(12115),a=r(29005),n=r(9535);let o=e=>{let{onStatusChange:t,resetTrigger:r}=e,[a,n]=(0,s.useState)(300),[o,i]=(0,s.useState)("active");return(0,s.useEffect)(()=>{if(0===a){"timeout"!==o&&(i("timeout"),null==t||t("timeout"));return}let e=setInterval(()=>{n(e=>e-1)},1e3);return()=>clearInterval(e)},[a]),(0,s.useEffect)(()=>{null==t||t(o)},[o,t]),(0,s.useEffect)(()=>{n(300),i("active"),null==t||t("active")},[r]),(0,l.jsx)("div",{className:"text-base font-bold text-center text-red-600",children:(e=>{let t=Math.floor(e/60);return"".concat(t.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))})(a)})};var i=r(99800),u=r(52596);let c=function(e){let{handleSubmit:t,loading:r,onChange:c,otpLength:d=6,email:f,handleResentOTP:x}=e,[m,p]=(0,s.useState)(Array(d).fill("")),g=(0,s.useRef)([]),[S,h]=(0,s.useState)(!1),v=(e,t)=>{if(!/^\d?$/.test(e))return;let r=[...m];if(r[t]=e,p(r),e&&t<d-1){var l;null==(l=g.current[t+1])||l.focus()}},A=(e,t)=>{var r,l,s;"Backspace"===e.key&&!m[t]&&t>0&&(null==(r=g.current[t-1])||r.focus()),"ArrowLeft"===e.key&&t>0&&(null==(l=g.current[t-1])||l.focus()),"ArrowRight"===e.key&&t<d-1&&(null==(s=g.current[t+1])||s.focus())},y=e=>{let t=e.clipboardData.getData("text").slice(0,d);if(!/^\d+$/.test(t))return;let r=t.split("");p([...r,...Array(d-r.length).fill("")]),setTimeout(()=>{var e;null==(e=g.current[t.length-1])||e.focus()},0)};return(0,s.useEffect)(()=>{c(m)},[m]),(0,l.jsxs)("main",{children:[(0,l.jsx)(a.A,{}),(0,l.jsx)("div",{className:" flex my-40 items-center justify-center px-4",children:(0,l.jsxs)("div",{className:"w-full sm:max-w-[400px]  bg-white text-center",children:[(0,l.jsx)("h2",{className:"sm:text-[27px] text-[19.5px] font-medium font-poppins",children:"Enter OTP To Continue"}),(0,l.jsxs)("p",{className:"text-[#767676] font-normal font-poppins text-[9px] sm:text-[12px]",children:["Enter the code sent to ",(0,l.jsx)("span",{className:"text-[#FF1645] font-normal font-poppins text-[12px]",children:f})]}),(0,l.jsx)("div",{className:"flex justify-between mb-[18px] text-[11px] sm:gap-[15px] mt-[18px]",children:m.map((e,t)=>(0,l.jsx)("input",{type:"text",inputMode:"numeric",maxLength:1,value:e,ref:e=>g.current[t]=e,onChange:e=>v(e.target.value,t),onKeyDown:e=>A(e,t),onPaste:y,autoFocus:0===t,className:"w-[40.5px] h-[40.5px] sm:w-[52.5px] sm:h-[52.5px] text-center text-xl border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#FFE7EC]"},t))}),(0,l.jsx)(i.A,{className:"py-1",children:(0,l.jsx)(o,{resetTrigger:!S,onStatusChange:e=>{"timeout"===e&&h(!0)}})}),(0,l.jsx)("p",{className:"text-[#767676] font-normal font-poppins text-[12px]",children:"Didn't get OTP Code?"}),(0,l.jsx)("button",{onClick:x,className:(0,u.A)("text-[#FF1645] font-normal font-poppins text-[12px]",S?"cursor-pointer":"cursor-not-allowed opacity-50"),children:"Resend Code"}),(0,l.jsxs)("button",{type:"submit",onClick:t,disabled:r,className:"w-full mt-3 text-[14px] cursor-pointer max-w-md w-f font-medium bg-[#FF1645] text-white  h-[35px] rounded-[3px] hover:bg-[#D8133A] transition flex items-center justify-center",children:[r?(0,l.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}):null,r?"loading...":"Submit"]})]})}),(0,l.jsx)(n.w,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4506,512,9204,5891,4134,2995,9304,5710,6698,404,3568,841,1448,8441,1684,7358],()=>t(9903)),_N_E=e.O()}]);